{"version":3,"file":"script.min.js","names":["headerMain","document","querySelector","navMain","navToggle","cardsList","downloadButton","modalOpenButtons","querySelectorAll","modalFade","modalWindow","modalCloseButton","sendFormButton","nameField","getElementById","phoneField","maxCardsCount","step","currentCardsCount","downloadClick","xhr","XMLHttpRequest","open","send","onload","status","console","log","statusText","loadCards","JSON","parse","response","onerror","addEventListener","modalOpenClick","style","display","forEach","item","modalCloseClick","validatePhoneNumber","phoneNumber","test","validateFormFields","event","preventDefault","mistake","value","classList","add","remove","e","target","getOneCard","title","description","userId","random","Math","floor","date","Date","toDateString","cards","nextCardsPart","slice","cardsHtml","map","card","body","innerHTML","join","contains"],"sources":["script.js"],"mappings":"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","sourcesContent":["let headerMain = document.querySelector('.main-header');\nlet navMain = document.querySelector('.main-nav');\nlet navToggle = document.querySelector('.main-nav__toggle');\nlet cardsList = document.querySelector('.cards__list');\nlet downloadButton = document.querySelector('.cards__more-button');\n\nlet modalOpenButtons = document.querySelectorAll('.showModal');\nlet modalFade = document.querySelector('.modal-fade');\nlet modalWindow = document.querySelector('.modal');\nlet modalCloseButton = document.querySelector('.modal__close');\n\nlet sendFormButton = document.querySelector('.form__button');\nlet nameField = document.getElementById('add-name');\nlet phoneField = document.getElementById('add-phone');\n\nlet maxCardsCount = 30;\nlet step = 5;\nlet currentCardsCount = 10;\n\nlet downloadClick = () => {\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', 'https://jsonplaceholder.typicode.com/posts');\n  xhr.send();\n  xhr.onload = () => (xhr.status !== 200) ? console.log(`Error ${xhr.status}: ${xhr.statusText}`) : loadCards(JSON.parse(xhr.response))\n  xhr.onerror = () => console.log(\"Request failed\");\n};\n\ndownloadButton.addEventListener(\"click\", downloadClick);\n\nlet modalOpenClick = () => {\n  modalFade.style.display = 'block';\n  modalWindow.style.display = 'block';\n};\n\nmodalOpenButtons.forEach((item) => {\n  item.addEventListener(\"click\", modalOpenClick);\n});\n\nlet modalCloseClick = () => {\n  modalFade.style.display = 'none';\n  modalWindow.style.display = 'none';\n};\n\nmodalCloseButton.addEventListener(\"click\", modalCloseClick);\n\nlet validatePhoneNumber = (phoneNumber) => {\n  const phoneRegex = /^(\\+7|8)?(\\d{10})$/;\n  return phoneRegex.test(phoneNumber);\n}\n\nlet validateFormFields = (event) => {\n  event.preventDefault();\n  let mistake = 0;\n  if (nameField.value === '') {\n    nameField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (phoneField.value === '') {\n    phoneField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (!validatePhoneNumber(phoneField.value)) {\n    phoneField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (mistake === 0) {\n    document.querySelector('.form').remove();\n    document.querySelector('.modal__success').style.display = 'block';\n  }\n};\n\nsendFormButton.addEventListener(\"click\", validateFormFields);\nnameField.addEventListener(\"change\", (e) => {\n  e.target.classList.remove(\"input--error\");\n});\nphoneField.addEventListener(\"change\", (e) => {\n  e.target.classList.remove(\"input--error\");\n});\n\nlet getOneCard = (title, description, userId) => {\n  let random = Math.floor(Math.random() * 9 + 1);\n  let themes = ['water','bridge','nature','','forest','water','bridge','nature','','forest'];\n  let userNames = ['Eugenia','Valeria','Kate','Igor','Alex','Lev','Sasha','Olga','Pavel','Viktor'];\n  const date = new Date().toDateString();\n  return `<article class=\"cards__item card\">\n          <picture class=\"card__image\">\n            <source type=\"image/webp\" media=\"(min-width: 1200px)\" srcset=\"img/p${random}-desktop.webp, img/p${random}-desktop@2x.webp 2x\">\n            <source type=\"image/webp\" media=\"(min-width: 768px)\" srcset=\"img/p${random}-tablet.webp, img/p${random}-tablet@2x.webp 2x\">\n            <source type=\"image/webp\" srcset=\"img/p${random}-mobile.webp, img/p${random}-mobile@2x.webp 2x\">\n            <source media=\"(min-width: 1200px)\" srcset=\"img/p${random}-desktop.jpg, img/p${random}-desktop@2x.jpg 2x\">\n            <source media=\"(min-width: 768px)\" srcset=\"img/p${random}-tablet.jpg, img/p${random}-tablet@2x.jpg 2x\">\n            <img src=\"img/p${random}-mobile.jpg\" srcset=\"img/p${random}-mobile@2x.jpg 2x\" width=\"329\" height=\"185\"\n                 alt=\"${title}\">\n          </picture>\n          <div class=\"card__wrapper\">\n              <div class=\"card__theme\">\n                ${themes[random]}\n              </div>\n              <h2 class=\"card__title\">\n                ${title}\n              </h2>\n              <div class=\"card__description\">\n                ${description}\n              </div>\n              <div class=\"card__information\">\n                Posted by <span class=\"card__user\">${userNames[userId]}</span>, on <span class=\"card__date\">${date}</span>\n              </div>\n              <button class=\"card__continue\">Continue reading</button>\n          </div>\n        </article>`;\n}\n\nlet loadCards = (cards) => {\n  if (currentCardsCount >= maxCardsCount) {\n    return;\n  }\n  let nextCardsPart = cards.slice(currentCardsCount-1, currentCardsCount+step-1);\n  currentCardsCount += step;\n  (currentCardsCount === maxCardsCount) ? downloadButton.remove() : '';\n  let cardsHtml = nextCardsPart.map(card => getOneCard(card.title, card.body, card.userId));\n  cardsList.innerHTML = cardsList.innerHTML + cardsHtml.join('');\n}\n\nheaderMain.classList.remove('main-header--nojs');\n\nnavToggle.addEventListener('click', function () {\n  if (navMain.classList.contains('main-nav--closed')) {\n    navMain.classList.remove('main-nav--closed');\n    navMain.classList.add('main-nav--opened');\n  } else {\n    navMain.classList.add('main-nav--closed');\n    navMain.classList.remove('main-nav--opened');\n  }\n});\n"]}