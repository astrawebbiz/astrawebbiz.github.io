{"version":3,"file":"script.min.js","names":["headerMain","document","querySelector","navMain","navToggle","cardsList","downloadButton","modalOpenButtons","querySelectorAll","modalFade","modalWindow","modalCloseButton","sendFormButton","nameField","getElementById","phoneField","maxCardsCount","step","currentCardsCount","xhr","XMLHttpRequest","cards","open","send","onload","status","console","log","statusText","JSON","parse","response","onerror","loadCards","nextCardsPart","slice","remove","cardsHtml","map","card","getOneCard","title","body","userId","innerHTML","join","addEventListener","modalOpenClick","style","display","forEach","item","modalCloseClick","validatePhoneNumber","phoneNumber","test","validateFormFields","event","preventDefault","mistake","value","classList","add","e","target","description","random","Math","floor","date","Date","toDateString","contains"],"sources":["script.js"],"mappings":"AAAA,IAAIA,WAAaC,SAASC,cAAc,gBACpCC,QAAUF,SAASC,cAAc,aACjCE,UAAYH,SAASC,cAAc,qBACnCG,UAAYJ,SAASC,cAAc,gBACnCI,eAAiBL,SAASC,cAAc,uBAExCK,iBAAmBN,SAASO,iBAAiB,cAC7CC,UAAYR,SAASC,cAAc,eACnCQ,YAAcT,SAASC,cAAc,UACrCS,iBAAmBV,SAASC,cAAc,iBAE1CU,eAAiBX,SAASC,cAAc,iBACxCW,UAAYZ,SAASa,eAAe,YACpCC,WAAad,SAASa,eAAe,aAErCE,cAAgB,GAChBC,KAAO,EACPC,kBAAoB,GAEpBC,IAAM,IAAIC,eACVC,MAAQ,CAAC,EACbF,IAAIG,KAAK,MAAO,8CAChBH,IAAII,OACJJ,IAAIK,OAAS,IAAsB,MAAfL,IAAIM,OAAkBC,QAAQC,IAAI,SAASR,IAAIM,WAAWN,IAAIS,cAAiBP,MAAQQ,KAAKC,MAAMX,IAAIY,UAC1HZ,IAAIa,QAAU,IAAMN,QAAQC,IAAI,kBAChCD,QAAQC,IAAIN,OACZ,IAAIY,UAAY,KACd,GAAIf,mBAAqBF,cACvB,OAEF,IAAIkB,EAAgBb,MAAMc,MAAMjB,kBAAkB,EAAGA,kBAAkBD,KAAK,GAC5EC,mBAAqBD,KACpBC,oBAAsBF,eAAiBV,eAAe8B,SACvD,IAAIC,EAAYH,EAAcI,KAAIC,GAAQC,WAAWD,EAAKE,MAAOF,EAAKG,KAAMH,EAAKI,UACjFtC,UAAUuC,UAAYvC,UAAUuC,UAAYP,EAAUQ,KAAK,GAAG,EAGhEvC,eAAewC,iBAAiB,QAASb,WAEzC,IAAIc,eAAiB,KACnBtC,UAAUuC,MAAMC,QAAU,QAC1BvC,YAAYsC,MAAMC,QAAU,OAAO,EAGrC1C,iBAAiB2C,SAASC,IACxBA,EAAKL,iBAAiB,QAASC,eAAe,IAGhD,IAAIK,gBAAkB,KACpB3C,UAAUuC,MAAMC,QAAU,OAC1BvC,YAAYsC,MAAMC,QAAU,MAAM,EAGpCtC,iBAAiBmC,iBAAiB,QAASM,iBAE3C,IAAIC,oBAAuBC,GACN,qBACDC,KAAKD,GAGrBE,mBAAsBC,IACxBA,EAAMC,iBACN,IAAIC,EAAU,EACU,KAApB9C,UAAU+C,QACZ/C,UAAUgD,UAAUC,IAAI,gBACxBH,KAEuB,KAArB5C,WAAW6C,QACb7C,WAAW8C,UAAUC,IAAI,gBACzBH,KAEGN,oBAAoBtC,WAAW6C,SAClC7C,WAAW8C,UAAUC,IAAI,gBACzBH,KAEc,IAAZA,IACF1D,SAASC,cAAc,SAASkC,SAChCnC,SAASC,cAAc,mBAAmB8C,MAAMC,QAAU,QAC5D,EAGFrC,eAAekC,iBAAiB,QAASU,oBACzC3C,UAAUiC,iBAAiB,UAAWiB,IACpCA,EAAEC,OAAOH,UAAUzB,OAAO,eAAe,IAE3CrB,WAAW+B,iBAAiB,UAAWiB,IACrCA,EAAEC,OAAOH,UAAUzB,OAAO,eAAe,IAG3C,IAAII,WAAa,CAACC,EAAOwB,EAAatB,KACpC,IAAIuB,EAASC,KAAKC,MAAsB,EAAhBD,KAAKD,SAAe,GAG5C,MAAMG,GAAO,IAAIC,MAAOC,eACxB,MAAO,+JAEwEL,wBAA6BA,yGAC9BA,uBAA4BA,6EACvDA,uBAA4BA,uFAClBA,uBAA4BA,sFAC7BA,sBAA2BA,oDAC5DA,8BAAmCA,uEACxCzB,8HAXT,CAAC,QAAQ,SAAS,SAAS,GAAG,SAAS,QAAQ,SAAS,SAAS,GAAG,UAe1DyB,qFAGPzB,0FAGAwB,8HApBA,CAAC,UAAU,UAAU,OAAO,OAAO,OAAO,MAAM,QAAQ,OAAO,QAAQ,UAuB1BtB,0CAA+C0B,8IAI3F,EAGnBrE,WAAW6D,UAAUzB,OAAO,qBAE5BhC,UAAU0C,iBAAiB,SAAS,WAC9B3C,QAAQ0D,UAAUW,SAAS,qBAC7BrE,QAAQ0D,UAAUzB,OAAO,oBACzBjC,QAAQ0D,UAAUC,IAAI,sBAEtB3D,QAAQ0D,UAAUC,IAAI,oBACtB3D,QAAQ0D,UAAUzB,OAAO,oBAE7B","sourcesContent":["let headerMain = document.querySelector('.main-header');\nlet navMain = document.querySelector('.main-nav');\nlet navToggle = document.querySelector('.main-nav__toggle');\nlet cardsList = document.querySelector('.cards__list');\nlet downloadButton = document.querySelector('.cards__more-button');\n\nlet modalOpenButtons = document.querySelectorAll('.showModal');\nlet modalFade = document.querySelector('.modal-fade');\nlet modalWindow = document.querySelector('.modal');\nlet modalCloseButton = document.querySelector('.modal__close');\n\nlet sendFormButton = document.querySelector('.form__button');\nlet nameField = document.getElementById('add-name');\nlet phoneField = document.getElementById('add-phone');\n\nlet maxCardsCount = 30;\nlet step = 5;\nlet currentCardsCount = 10;\n\nlet xhr = new XMLHttpRequest();\nlet cards = {};\nxhr.open('GET', 'https://jsonplaceholder.typicode.com/posts');\nxhr.send();\nxhr.onload = () => (xhr.status !== 200) ? console.log(`Error ${xhr.status}: ${xhr.statusText}`) : (cards = JSON.parse(xhr.response));\nxhr.onerror = () => console.log(\"Request failed\");\nconsole.log(cards);\nlet loadCards = () => {\n  if (currentCardsCount >= maxCardsCount) {\n    return;\n  }\n  let nextCardsPart = cards.slice(currentCardsCount-1, currentCardsCount+step-1);\n  currentCardsCount += step;\n  (currentCardsCount === maxCardsCount) ? downloadButton.remove() : '';\n  let cardsHtml = nextCardsPart.map(card => getOneCard(card.title, card.body, card.userId));\n  cardsList.innerHTML = cardsList.innerHTML + cardsHtml.join('');\n}\n\ndownloadButton.addEventListener(\"click\", loadCards);\n\nlet modalOpenClick = () => {\n  modalFade.style.display = 'block';\n  modalWindow.style.display = 'block';\n};\n\nmodalOpenButtons.forEach((item) => {\n  item.addEventListener(\"click\", modalOpenClick);\n});\n\nlet modalCloseClick = () => {\n  modalFade.style.display = 'none';\n  modalWindow.style.display = 'none';\n};\n\nmodalCloseButton.addEventListener(\"click\", modalCloseClick);\n\nlet validatePhoneNumber = (phoneNumber) => {\n  const phoneRegex = /^(\\+7|8)?(\\d{10})$/;\n  return phoneRegex.test(phoneNumber);\n}\n\nlet validateFormFields = (event) => {\n  event.preventDefault();\n  let mistake = 0;\n  if (nameField.value === '') {\n    nameField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (phoneField.value === '') {\n    phoneField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (!validatePhoneNumber(phoneField.value)) {\n    phoneField.classList.add(\"input--error\");\n    mistake++;\n  }\n  if (mistake === 0) {\n    document.querySelector('.form').remove();\n    document.querySelector('.modal__success').style.display = 'block';\n  }\n};\n\nsendFormButton.addEventListener(\"click\", validateFormFields);\nnameField.addEventListener(\"change\", (e) => {\n  e.target.classList.remove(\"input--error\");\n});\nphoneField.addEventListener(\"change\", (e) => {\n  e.target.classList.remove(\"input--error\");\n});\n\nlet getOneCard = (title, description, userId) => {\n  let random = Math.floor(Math.random() * 9 + 1);\n  let themes = ['water','bridge','nature','','forest','water','bridge','nature','','forest'];\n  let userNames = ['Eugenia','Valeria','Kate','Igor','Alex','Lev','Sasha','Olga','Pavel','Viktor'];\n  const date = new Date().toDateString();\n  return `<article class=\"cards__item card\">\n          <picture class=\"card__image\">\n            <source type=\"image/webp\" media=\"(min-width: 1200px)\" srcset=\"img/p${random}-desktop.webp, img/p${random}-desktop@2x.webp 2x\">\n            <source type=\"image/webp\" media=\"(min-width: 768px)\" srcset=\"img/p${random}-tablet.webp, img/p${random}-tablet@2x.webp 2x\">\n            <source type=\"image/webp\" srcset=\"img/p${random}-mobile.webp, img/p${random}-mobile@2x.webp 2x\">\n            <source media=\"(min-width: 1200px)\" srcset=\"img/p${random}-desktop.jpg, img/p${random}-desktop@2x.jpg 2x\">\n            <source media=\"(min-width: 768px)\" srcset=\"img/p${random}-tablet.jpg, img/p${random}-tablet@2x.jpg 2x\">\n            <img src=\"img/p${random}-mobile.jpg\" srcset=\"img/p${random}-mobile@2x.jpg 2x\" width=\"329\" height=\"185\"\n                 alt=\"${title}\">\n          </picture>\n          <div class=\"card__wrapper\">\n              <div class=\"card__theme\">\n                ${themes[random]}\n              </div>\n              <h2 class=\"card__title\">\n                ${title}\n              </h2>\n              <div class=\"card__description\">\n                ${description}\n              </div>\n              <div class=\"card__information\">\n                Posted by <span class=\"card__user\">${userNames[userId]}</span>, on <span class=\"card__date\">${date}</span>\n              </div>\n              <button class=\"card__continue\">Continue reading</button>\n          </div>\n        </article>`;\n}\n\nheaderMain.classList.remove('main-header--nojs');\n\nnavToggle.addEventListener('click', function () {\n  if (navMain.classList.contains('main-nav--closed')) {\n    navMain.classList.remove('main-nav--closed');\n    navMain.classList.add('main-nav--opened');\n  } else {\n    navMain.classList.add('main-nav--closed');\n    navMain.classList.remove('main-nav--opened');\n  }\n});\n"]}