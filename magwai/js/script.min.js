let headerMain=document.querySelector(".main-header"),navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toggle"),cardsList=document.querySelector(".cards__list"),downloadButton=document.querySelector(".cards__more-button"),modalOpenButtons=document.querySelectorAll(".showModal"),modalFade=document.querySelector(".modal-fade"),modalWindow=document.querySelector(".modal"),modalCloseButton=document.querySelector(".modal__close"),sendFormButton=document.querySelector(".form__button"),nameField=document.getElementById("add-name"),phoneField=document.getElementById("add-phone"),maxCardsCount=30,step=5,currentCardsCount=10,downloadClick=()=>{let e=new XMLHttpRequest;e.open("GET","https://jsonplaceholder.typicode.com/posts"),e.send(),e.onload=()=>200!==e.status?console.log(`Error ${e.status}: ${e.statusText}`):loadCards(JSON.parse(e.response)),e.onerror=()=>console.log("Request failed")};downloadButton.addEventListener("click",downloadClick);let modalOpenClick=()=>{modalFade.style.display="block",modalWindow.style.display="block"};modalOpenButtons.forEach((e=>{e.addEventListener("click",modalOpenClick)}));let modalCloseClick=()=>{modalFade.style.display="none",modalWindow.style.display="none"};modalCloseButton.addEventListener("click",modalCloseClick);let validatePhoneNumber=e=>/^(\+7|8)?(\d{10})$/.test(e),validateFormFields=e=>{e.preventDefault();let t=0;""===nameField.value&&(nameField.classList.add("input--error"),t++),""===phoneField.value&&(phoneField.classList.add("input--error"),t++),validatePhoneNumber(phoneField.value)||(phoneField.classList.add("input--error"),t++),0===t&&(document.querySelector(".form").remove(),document.querySelector(".modal__success").style.display="block")};sendFormButton.addEventListener("click",validateFormFields),nameField.addEventListener("change",(e=>{e.target.classList.remove("input--error")})),phoneField.addEventListener("change",(e=>{e.target.classList.remove("input--error")}));let getOneCard=(e,t,a)=>{let n=Math.floor(9*Math.random()+1);const o=(new Date).toDateString();return`<article class="cards__item card">\n          <picture class="card__image">\n            <source type="image/webp" media="(min-width: 1200px)" srcset="img/p${n}-desktop.webp, img/p${n}-desktop@2x.webp 2x">\n            <source type="image/webp" media="(min-width: 768px)" srcset="img/p${n}-tablet.webp, img/p${n}-tablet@2x.webp 2x">\n            <source type="image/webp" srcset="img/p${n}-mobile.webp, img/p${n}-mobile@2x.webp 2x">\n            <source media="(min-width: 1200px)" srcset="img/p${n}-desktop.jpg, img/p${n}-desktop@2x.jpg 2x">\n            <source media="(min-width: 768px)" srcset="img/p${n}-tablet.jpg, img/p${n}-tablet@2x.jpg 2x">\n            <img src="img/p${n}-mobile.jpg" srcset="img/p${n}-mobile@2x.jpg 2x" width="329" height="185"\n                 alt="${e}">\n          </picture>\n          <div class="card__wrapper">\n              <div class="card__theme">\n                ${["water","bridge","nature","","forest","water","bridge","nature","","forest"][n]}\n              </div>\n              <div class="card__title">\n                ${e}\n              </div>\n              <div class="card__description">\n                ${t}\n              </div>\n              <div class="card__information">\n                Posted by <span class="card__user">${["Eugenia","Valeria","Kate","Igor","Alex","Lev","Sasha","Olga","Pavel","Viktor"][a]}</span>, on <span class="card__date">${o}</span>\n              </div>\n              <button class="card__continue">Continue reading</button>\n          </div>\n        </article>`},loadCards=e=>{if(currentCardsCount>=maxCardsCount)return;let t=e.slice(currentCardsCount-1,currentCardsCount+step-1);currentCardsCount+=step,currentCardsCount===maxCardsCount&&downloadButton.remove();let a=t.map((e=>getOneCard(e.title,e.body,e.userId)));cardsList.innerHTML=cardsList.innerHTML+a.join("")};headerMain.classList.remove("main-header--nojs"),navToggle.addEventListener("click",(function(){navMain.classList.contains("main-nav--closed")?(navMain.classList.remove("main-nav--closed"),navMain.classList.add("main-nav--opened")):(navMain.classList.add("main-nav--closed"),navMain.classList.remove("main-nav--opened"))}));
//# sourceMappingURL=script.min.js.map
